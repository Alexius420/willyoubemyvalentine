<!DOCTYPE html>
<html>
<head>
    <title>Before I Ask You Something Important... üíç</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        body {
            margin: 0;
            font-family: 'Georgia', serif;
            color: white;
            text-align: center;
            overflow-x: hidden;
            background: linear-gradient(135deg, #3a1c71, #d76d77, #ffaf7b);
            background-size: 400% 400%;
            animation: romanticBG 12s ease infinite;
        }

        @keyframes romanticBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Sparkle overlay */
        body::before {
            content: "";
            position: fixed;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 2px, transparent 2px);
            background-size: 40px 40px;
            animation: sparkle 4s linear infinite;
            z-index: 0;
        }

        @keyframes sparkle {
            from { transform: translateY(0); }
            to { transform: translateY(-40px); }
        }

        .container {
            margin-top: 80px;
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        h1 {
            font-size: 48px;
            text-shadow: 0 0 20px rgba(255,255,255,0.8);
        }

        h2 {
            font-size: 32px;
        }

        #score {
            font-size: 18px;
            margin-bottom: 20px;
        }

        button {
            background: white;
            color: #d76d77;
            border: none;
            padding: 14px 30px;
            margin: 10px;
            font-size: 18px;
            border-radius: 30px;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        button:hover {
            background: #ffe6eb;
            transform: scale(1.05);
        }

        .option {
            display: block;
            margin: 10px auto;
            width: 300px;
        }

        #quiz, #final-section, #proposal-section {
            display: none;
        }

        input {
            width: 70px;
            height: 70px;
            font-size: 32px;
            text-align: center;
            margin: 10px;
            border-radius: 15px;
            border: none;
            background: rgba(255,255,255,0.9);
            color: #d76d77;
        }

        /* Rose petals */
        .petal {
            position: fixed;
            top: -20px;
            font-size: 20px;
            animation: fall 8s linear forwards;
            z-index: 1;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Giant YES */
        #giantYES {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            font-size: 180px;
            font-weight: bold;
            color: white;
            text-shadow:
                0 0 20px #fff,
                0 0 40px #ffaf7b,
                0 0 60px #d76d77,
                0 0 100px #ffaf7b;
            z-index: 9999;
            transition: transform 0.6s ease-out;
        }

        #proposal-section h2 {
            font-size: 42px;
            margin-top: 40px;
            text-shadow: 0 0 20px rgba(255,255,255,0.9);
        }

    </style>
</head>

<body>

<div class="container">

    <h1 id="opening">Before I Ask You Something Important... üíç</h1>
    <button id="startBtn" onclick="startQuiz()">Start</button>

    <div id="quiz">
        <div id="score">Score: 0 / 9</div>
        <h2 id="question"></h2>
        <div id="options"></div>
        <button id="nextBtn" onclick="nextQuestion()" style="display:none;">Next</button>
    </div>

    <div id="final-section">
        <h2>The Final Question... üíç</h2>

        <p>1) What's the first letter of yellow?</p>
        <input maxlength="1" id="c1">

        <p>2) What's 7 - 4?</p>
        <input maxlength="1" id="c2">

        <p>3) What's the first letter of start?</p>
        <input maxlength="1" id="c3">

        <br><br>
        <button onclick="checkFinal()">Lock Answer</button>
    </div>

    <!-- VALENTINE PROPOSAL SECTION -->
    <div id="proposal-section">
        <h2>Will you be my Valentine? üíå‚ù§Ô∏è</h2>
        <button onclick="finalCelebration()">YES üíñ</button>
    </div>

</div>

<script>
const questions = [
    { q: "When was our first interaction? üíã", options: ["In class","At KISA","At the carnival","Picnic"], correct: 2 },
    { q: "When was our FIRST first date? üòç", options: ["The 31st of January","The 22nd of December","The 7th of September","The 14th of February"], correct: 1 },
    { q: "When is our anniversary? üòò", options: ["31st of January","17th of March","22nd of July","17th of November"], correct: 0 },
    { q: "What was the one thing that got you to even consider me in our 8th grade picnic? ‚òÄÔ∏è", options: ["A teddy bear","My handsome face","My name","A stolen flower"], correct: 3 },
    { q: "What did we start doing in the hallways in 8th? ü§ó", options: ["Hold hands","Run around","Dance","Sing"], correct: 0 },
    { q: "Whats the one thing you love about me the most? üòé", options: ["My face","My personality","My hands","My smile"], correct: 2 },
    { q: "What did I wear on our FIRST first date? üëÑ", options: ["A red polo and a jacket","White shirt","School uniform","Oversized tee"], correct: 0 },
    { q: "What was the first ever ring I gave you made of? üíç", options: ["Silver","Gold","Love","Bronze"], correct: 2 },
    { q: "What do I love about you the most? ü•∞", options: ["Your heart","Your soul","Your smile","All of the above"], correct: 3 }
];

let current = 0;
let score = 0;

function startQuiz() {
    document.getElementById("opening").style.display = "none";
    document.getElementById("startBtn").style.display = "none";
    document.getElementById("quiz").style.display = "block";
    loadQuestion();
}

function loadQuestion() {
    const question = questions[current];
    document.getElementById("question").innerText = question.q;
    const optionsDiv = document.getElementById("options");
    optionsDiv.innerHTML = "";
    document.getElementById("nextBtn").style.display = "none";

    question.options.forEach((opt, index) => {
        const btn = document.createElement("button");
        btn.innerText = opt;
        btn.className = "option";
        btn.onclick = () => selectOption(index);
        optionsDiv.appendChild(btn);
    });
}

function selectOption(index) {
    const correctIndex = questions[current].correct;
    const buttons = document.querySelectorAll(".option");
    buttons.forEach(btn => btn.disabled = true);

    if (index === correctIndex) {
        buttons[index].style.background = "#b4f8c8";
        score++;
    } else {
        buttons[index].style.background = "#ffadad";
        buttons[correctIndex].style.background = "#b4f8c8";
    }

    document.getElementById("nextBtn").style.display = "inline-block";
}

function nextQuestion() {
    current++;
    document.getElementById("score").innerText = "Score: " + score + " / 9";

    if (current < questions.length) {
        loadQuestion();
    } else {
        document.getElementById("quiz").style.display = "none";
        document.getElementById("final-section").style.display = "block";
    }
}

function checkFinal() {
    const c1 = document.getElementById("c1").value.toUpperCase();
    const c2 = document.getElementById("c2").value;
    const c3 = document.getElementById("c3").value.toUpperCase();

    if (c1 === "Y" && c2 === "3" && c3 === "S") {
        explodeYES();
    } else {
        alert("The correct answers were: Y, 3, S üíï");
    }
}

function explodeYES() {
    const giant = document.createElement("div");
    giant.id = "giantYES";
    giant.innerText = "YES";
    document.body.appendChild(giant);

    setTimeout(() => {
        giant.style.transform = "translate(-50%, -50%) scale(1.3)";
    }, 50);

    confetti({
        particleCount: 600,
        spread: 180,
        origin: { y: 0.6 }
    });

    setTimeout(() => {
        document.getElementById("final-section").style.display = "none";
        document.getElementById("proposal-section").style.display = "block";
    }, 2000);
}

function finalCelebration() {
    confetti({
        particleCount: 800,
        spread: 200,
        origin: { y: 0.6 }
    });
}

/* Falling Rose Petals */
setInterval(() => {
    let petal = document.createElement("div");
    petal.innerHTML = "üåπ";
    petal.className = "petal";
    petal.style.left = Math.random() * 100 + "vw";
    petal.style.fontSize = (15 + Math.random() * 20) + "px";
    document.body.appendChild(petal);
    setTimeout(() => petal.remove(), 8000);
}, 600);

</script>

</body>
</html>
